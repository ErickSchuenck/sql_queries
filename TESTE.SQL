SELECT
      PPNF.DISPLAY_NAME AS "Nome Completo",
      PAPF.PERSON_NUMBER AS "Numero Pessoal",
      PAAM.ASSIGNMENT_NUMBER AS "Matricula",
      PPOS.DATE_START AS "Data de Admissão",
      CMPS.SALARY_AMOUNT AS "Salário"
    FROM
      PER_ALL_PEOPLE_F PAPF,
      PER_PERSON_NAMES_F PPNF,
      PER_ALL_ASSIGNMENTS_M PAAM,
      PER_PERIODS_OF_SERVICE PPOS,
      CMP_SALARY CMPS
    WHERE
      PPNF.PERSON_ID = PAPF.PERSON_ID
      AND PPNF.NAME_TYPE = 'GLOBAL'
      AND PAPF.PERSON_NUMBER = NVL(:P_PERSON_NUMBER,
      PAPF.PERSON_NUMBER )
      AND PAPF.EFFECTIVE_END_DATE = (
        SELECT
          MAX(PAPF2.EFFECTIVE_END_DATE)
        FROM
          PER_ALL_PEOPLE_F PAPF2
        WHERE
          PAPF2.PERSON_ID = PAPF.PERSON_ID
      )
      AND PAAM.PERSON_ID = PAPF.PERSON_ID
      AND PAAM.WORK_TERMS_ASSIGNMENT_ID IS NOT NULL
      AND PPOS.PERSON_ID = PAPF.PERSON_ID
      AND PAAM.ASSIGNMENT_TYPE = 'E'
      AND PAAM.EFFECTIVE_END_DATE = (
        SELECT
          MAX(PAAM.EFFECTIVE_END_DATE)
        FROM
          PER_ALL_ASSIGNMENTS_M PAAM
        WHERE
          PAAM.PERSON_ID = PAPF.PERSON_ID
      )
      AND CMPS.PERSON_ID = PAPF.PERSON_ID
      AND CMPS.SALARY_AMOUNT = (
        SELECT 
            MAX(CMPS.SALARY_AMOUNT)
        FROM
            CMP_SALARY CMPS2
        WHERE
            CMPS.PERSON_ID = CMPS2.PERSON_ID
        )